<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ”² æ•°å­—åå®¹é“</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #4ade80;
            --warning: #fbbf24;
            --danger: #f87171;
            --dark: #1e293b;
            --light: #f8fafc;
            --tile-bg: #ffffff;
            --tile-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', 'ZCOOL KuaiLe', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            color: white;
            font-size: clamp(2rem, 8vw, 3rem);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            margin-bottom: 20px;
            text-align: center;
        }

        .controls {
            background: rgba(255,255,255,0.95);
            padding: 15px 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            width: 100%;
        }

        .difficulty-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .difficulty-selector label {
            font-weight: 700;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .difficulty-selector select {
            padding: 8px 15px;
            font-size: 1rem;
            border: 2px solid var(--primary);
            border-radius: 10px;
            background: white;
            font-family: inherit;
            cursor: pointer;
            font-weight: 700;
        }

        .btn {
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-success {
            background: linear-gradient(135deg, #22c55e, var(--success));
            color: white;
            box-shadow: 0 4px 15px rgba(74, 222, 128, 0.4);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 222, 128, 0.6);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #f59e0b);
            color: white;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251, 191, 36, 0.6);
        }

        .stats {
            background: rgba(255,255,255,0.95);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            width: 100%;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--dark);
        }

        .game-board {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            position: relative;
        }

        .grid-container {
            display: grid;
            gap: 8px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            position: relative;
        }

        .tile {
            width: 70px;
            height: 70px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--dark);
            cursor: pointer;
            box-shadow: 
                0 4px 6px rgba(0,0,0,0.1),
                0 1px 3px rgba(0,0,0,0.08),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.15s ease;
            user-select: none;
            position: relative;
        }

        .tile:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 12px rgba(0,0,0,0.15),
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
        }

        .tile:active {
            transform: translateY(0);
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .tile.empty {
            background: transparent;
            box-shadow: none;
            cursor: default;
        }

        .tile.empty:hover {
            transform: none;
            box-shadow: none;
        }

        .tile.correct {
            background: linear-gradient(145deg, #dcfce7, #bbf7d0);
            color: #166534;
        }

        .tile.moving {
            animation: tileMove 0.2s ease;
        }

        @keyframes tileMove {
            0% { transform: scale(0.95); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .message {
            text-align: center;
            margin-top: 15px;
            min-height: 30px;
        }

        .message-text {
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        .message-text.success {
            color: #4ade80;
            font-size: 1.3rem;
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .rules {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .rules h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .rules p {
            color: #475569;
            line-height: 1.6;
            margin: 5px 0;
            font-size: 0.95rem;
        }

        .win-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .win-modal.show {
            display: flex;
            animation: fadeIn 0.3s;
        }

        .win-content {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            padding: 40px 60px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            animation: popIn 0.5s;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .win-content h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .win-content p {
            font-size: 1.2rem;
            color: #555;
            margin: 10px 0;
        }

        .win-content .btn {
            margin-top: 20px;
        }

        /* éš¾åº¦ç‰¹å®šæ ·å¼ */
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        .grid-5 { grid-template-columns: repeat(5, 1fr); }

        .grid-3 .tile { 
            width: 90px; 
            height: 90px; 
            font-size: 2.2rem;
        }

        .grid-5 .tile { 
            width: 55px; 
            height: 55px; 
            font-size: 1.4rem;
        }

        @media (max-width: 500px) {
            .grid-3 .tile { 
                width: 75px; 
                height: 75px; 
                font-size: 1.8rem;
            }
            .grid-4 .tile { 
                width: 60px; 
                height: 60px; 
                font-size: 1.5rem;
            }
            .grid-5 .tile { 
                width: 45px; 
                height: 45px; 
                font-size: 1.2rem;
            }
        }

        @media (max-width: 380px) {
            .grid-3 .tile { 
                width: 65px; 
                height: 65px; 
                font-size: 1.5rem;
            }
            .grid-4 .tile { 
                width: 50px; 
                height: 50px; 
                font-size: 1.3rem;
            }
            .grid-5 .tile { 
                width: 38px; 
                height: 38px; 
                font-size: 1rem;
            }
        }

        .hint-btn {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
        }

        .hint-btn:hover {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
        }

        .hint-text {
            color: #fbbf24;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”² æ•°å­—åå®¹é“</h1>
        <p class="subtitle">æŠŠæ‰“ä¹±çš„æ•°å­—æŒ‰é¡ºåºæ’åˆ—ï¼ŒæŒ‘æˆ˜ä½ çš„ç©ºé—´æ€ç»´ï¼</p>

        <div class="controls">
            <div class="difficulty-selector">
                <label>ğŸ¯ éš¾åº¦ï¼š</label>
                <select id="gridSize" onchange="initGame()">
                    <option value="3">3Ã—3 (å…¥é—¨)</option>
                    <option value="4" selected>4Ã—4 (æ ‡å‡†)</option>
                    <option value="5">5Ã—5 (å›°éš¾)</option>
                </select>
            </div>
            <button class="btn btn-warning" onclick="shuffleBoard()">ğŸ”€ é‡æ–°æ‰“ä¹±</button>
            <button class="btn btn-success" onclick="showHint()">ğŸ’¡ æç¤º</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">æ­¥æ•°</div>
                <div class="stat-value" id="moveCount">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç”¨æ—¶</div>
                <div class="stat-value" id="timer">00:00</div>
            </div>
        </div>

        <div class="game-board">
            <div class="grid-container grid-4" id="gridContainer">
                <!-- æ ¼å­ä¼šåœ¨è¿™é‡Œç”Ÿæˆ -->
            </div>
        </div>

        <div class="message">
            <div class="message-text" id="message">ğŸ‘† ç‚¹å‡»æ•°å­—æ–¹å—ç§»åŠ¨</div>
        </div>

        <div class="rules">
            <h3>ğŸ“– æ¸¸æˆè§„åˆ™</h3>
            <p>1ï¸âƒ£ ç‚¹å‡»æ•°å­—æ–¹å—ï¼Œå¦‚æœæ—è¾¹æœ‰ç©ºä½å°±å¯ä»¥ç§»åŠ¨</p>
            <p>2ï¸âƒ£ ç›®æ ‡ï¼šæŠŠæ•°å­—æŒ‰ 1ã€2ã€3... é¡ºåºæ’åˆ—</p>
            <p>3ï¸âƒ£ ç©ºç™½æ ¼åº”è¯¥åœ¨æœ€åï¼ˆå³ä¸‹è§’ï¼‰</p>
            <p>ğŸ’¡ æç¤ºï¼šè§‚å¯Ÿæ•°å­—ä½ç½®ï¼Œè§„åˆ’ç§»åŠ¨è·¯çº¿</p>
        </div>
    </div>

    <div class="win-modal" id="winModal">
        <div class="win-content">
            <h2>ğŸ‰ æ­å–œé€šå…³ï¼</h2>
            <p>ä½ ç”¨ <span id="finalMoves">0</span> æ­¥å®Œæˆäº†æŒ‘æˆ˜ï¼</p>
            <p>â±ï¸ ç”¨æ—¶ï¼š<span id="finalTime">00:00</span></p>
            <button class="btn btn-primary" onclick="closeWinModal()">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gridSize = 4;
        let board = [];
        let moveCount = 0;
        let startTime = null;
        let timerInterval = null;
        let isPlaying = false;

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            gridSize = parseInt(document.getElementById('gridSize').value);
            const container = document.getElementById('gridContainer');
            
            // æ›´æ–°ç½‘æ ¼æ ·å¼
            container.className = `grid-container grid-${gridSize}`;
            
            // åˆ›å»ºæœ‰åºæ•°ç»„ [1, 2, ..., size*size-1, 0]
            board = [];
            for (let i = 1; i < gridSize * gridSize; i++) {
                board.push(i);
            }
            board.push(0); // 0 è¡¨ç¤ºç©ºç™½æ ¼
            
            resetGame();
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            moveCount = 0;
            updateStats();
            showMessage('ğŸ‘† ç‚¹å‡»æ•°å­—æ–¹å—ç§»åŠ¨ï¼ŒæŒ‰é¡ºåºæ’åˆ— 1 åˆ° ' + (gridSize * gridSize - 1));
            
            // é‡ç½®è®¡æ—¶å™¨
            clearInterval(timerInterval);
            startTime = null;
            document.getElementById('timer').textContent = '00:00';
            
            // åˆå§‹æ˜¾ç¤ºæœ‰åºçŠ¶æ€
            renderBoard();
            
            // å»¶è¿Ÿåæ‰“ä¹±
            setTimeout(() => {
                shuffleBoard();
            }, 500);
        }

        // æ‰“ä¹±æ£‹ç›˜ï¼ˆç¡®ä¿å¯è§£ï¼‰
        function shuffleBoard() {
            // ä»å®ŒæˆçŠ¶æ€å¼€å§‹ï¼Œéšæœºç§»åŠ¨è‹¥å¹²æ­¥
            // è¿™æ ·ä¿è¯ç”Ÿæˆçš„è°œé¢˜ä¸€å®šæœ‰è§£
            let shuffleMoves = gridSize * 25; // æ‰“ä¹±æ­¥æ•°
            let lastMove = -1;
            
            let shuffleInterval = setInterval(() => {
                const emptyIndex = board.indexOf(0);
                const neighbors = getNeighbors(emptyIndex);
                
                // é¿å…ç«‹å³å›é€€
                let validNeighbors = neighbors.filter(n => n !== lastMove);
                if (validNeighbors.length === 0) {
                    validNeighbors = neighbors;
                }
                
                const randomNeighbor = validNeighbors[Math.floor(Math.random() * validNeighbors.length)];
                swapTiles(emptyIndex, randomNeighbor, false);
                lastMove = emptyIndex;
                
                shuffleMoves--;
                if (shuffleMoves <= 0) {
                    clearInterval(shuffleInterval);
                    isPlaying = true;
                    startTime = Date.now();
                    timerInterval = setInterval(updateTimer, 1000);
                    showMessage('ğŸ® å¼€å§‹ï¼æŠŠæ•°å­—æŒ‰é¡ºåºæ’åˆ—');
                }
            }, 20);
        }

        // è·å–é‚»å±…ç´¢å¼•
        function getNeighbors(index) {
            const neighbors = [];
            const row = Math.floor(index / gridSize);
            const col = index % gridSize;
            
            // ä¸Š
            if (row > 0) neighbors.push(index - gridSize);
            // ä¸‹
            if (row < gridSize - 1) neighbors.push(index + gridSize);
            // å·¦
            if (col > 0) neighbors.push(index - 1);
            // å³
            if (col < gridSize - 1) neighbors.push(index + 1);
            
            return neighbors;
        }

        // æ¸²æŸ“æ£‹ç›˜
        function renderBoard() {
            const container = document.getElementById('gridContainer');
            container.innerHTML = '';
            
            board.forEach((num, index) => {
                const tile = document.createElement('div');
                tile.className = 'tile';
                
                if (num === 0) {
                    tile.classList.add('empty');
                } else {
                    tile.textContent = num;
                    tile.onclick = () => handleTileClick(index);
                    
                    // æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
                    if (num === index + 1) {
                        tile.classList.add('correct');
                    }
                }
                
                container.appendChild(tile);
            });
        }

        // å¤„ç†æ ¼å­ç‚¹å‡»
        function handleTileClick(index) {
            if (!isPlaying) return;
            
            const emptyIndex = board.indexOf(0);
            const neighbors = getNeighbors(emptyIndex);
            
            if (neighbors.includes(index)) {
                // å¯ä»¥ç§»åŠ¨
                swapTiles(index, emptyIndex, true);
                
                // æ£€æŸ¥æ˜¯å¦è·èƒœ
                if (checkWin()) {
                    handleWin();
                } else {
                    const correctCount = board.filter((num, idx) => num === idx + 1 && num !== 0).length;
                    if (correctCount > 0) {
                        showMessage(`âœ¨ å·²æœ‰ ${correctCount} ä¸ªæ•°å­—åœ¨æ­£ç¡®ä½ç½®ï¼ç»§ç»­åŠ æ²¹ï¼`);
                    }
                }
            } else {
                // ä¸èƒ½ç§»åŠ¨ï¼Œæ˜¾ç¤ºæç¤º
                const tile = document.querySelectorAll('.tile')[index];
                tile.style.animation = 'shake 0.3s';
                setTimeout(() => {
                    tile.style.animation = '';
                }, 300);
                showMessage('âŒ è¿™ä¸ªæ–¹å—ä¸èƒ½ç§»åŠ¨ï¼Œåªèƒ½ç§»åŠ¨åˆ°ç›¸é‚»çš„ç©ºä½');
            }
        }

        // äº¤æ¢ä¸¤ä¸ªæ ¼å­
        function swapTiles(index1, index2, countMove = true) {
            [board[index1], board[index2]] = [board[index2], board[index1]];
            
            if (countMove) {
                moveCount++;
                updateStats();
            }
            
            renderBoard();
        }

        // æ£€æŸ¥æ˜¯å¦è·èƒœ
        function checkWin() {
            for (let i = 0; i < board.length - 1; i++) {
                if (board[i] !== i + 1) {
                    return false;
                }
            }
            return board[board.length - 1] === 0;
        }

        // å¤„ç†è·èƒœ
        function handleWin() {
            isPlaying = false;
            clearInterval(timerInterval);
            
            document.getElementById('finalMoves').textContent = moveCount;
            document.getElementById('finalTime').textContent = document.getElementById('timer').textContent;
            
            showMessage('ğŸ‰ æ­å–œä½ å®Œæˆäº†æŒ‘æˆ˜ï¼', 'success');
            
            setTimeout(() => {
                document.getElementById('winModal').classList.add('show');
            }, 500);
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            document.getElementById('moveCount').textContent = moveCount;
        }

        // æ›´æ–°è®¡æ—¶å™¨
        function updateTimer() {
            if (!startTime) return;
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
            const seconds = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `${minutes}:${seconds}`;
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, type = '') {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = 'message-text ' + type;
        }

        // å…³é—­è·èƒœå¼¹çª—
        function closeWinModal() {
            document.getElementById('winModal').classList.remove('show');
            resetGame();
        }

        // æ˜¾ç¤ºæç¤º
        function showHint() {
            if (!isPlaying) {
                showMessage('ğŸ® å…ˆç‚¹å‡»"é‡æ–°æ‰“ä¹±"å¼€å§‹æ¸¸æˆ');
                return;
            }
            
            // æ‰¾åˆ°åº”è¯¥ç§»åŠ¨çš„æ•°å­—
            const emptyIndex = board.indexOf(0);
            const neighbors = getNeighbors(emptyIndex);
            
            if (neighbors.length === 0) return;
            
            // æ‰¾å‡ºå“ªä¸ªé‚»å±…ç§»åŠ¨åèƒ½è®©æŸä¸ªæ•°å­—åˆ°è¾¾æ­£ç¡®ä½ç½®
            let bestMove = null;
            let bestScore = -1;
            
            neighbors.forEach(neighborIndex => {
                const num = board[neighborIndex];
                const targetIndex = num - 1; // æ•°å­—åº”è¯¥åœ¨çš„ä½ç½®
                
                // è®¡ç®—ç§»åŠ¨åçš„æ”¶ç›Š
                let score = 0;
                
                // å¦‚æœç§»åŠ¨åè¯¥æ•°å­—åˆ°è¾¾æ­£ç¡®ä½ç½®ï¼ŒåŠ åˆ†
                if (targetIndex === emptyIndex) {
                    score += 10;
                }
                
                // è·ç¦»æ­£ç¡®ä½ç½®æ›´è¿‘åŠ åˆ†
                const currentDist = Math.abs(Math.floor(neighborIndex / gridSize) - Math.floor(targetIndex / gridSize)) +
                                   Math.abs((neighborIndex % gridSize) - (targetIndex % gridSize));
                const newDist = Math.abs(Math.floor(emptyIndex / gridSize) - Math.floor(targetIndex / gridSize)) +
                               Math.abs((emptyIndex % gridSize) - (targetIndex % gridSize));
                
                if (newDist < currentDist) {
                    score += 5;
                }
                
                if (score > bestScore) {
                    bestScore = score;
                    bestMove = neighborIndex;
                }
            });
            
            if (bestMove !== null) {
                const tiles = document.querySelectorAll('.tile');
                tiles[bestMove].style.boxShadow = '0 0 20px #fbbf24, 0 0 40px #fbbf24';
                showMessage('ğŸ’¡ æç¤ºï¼šè¯•ç€ç§»åŠ¨è¿™ä¸ªé«˜äº®çš„æ•°å­—ï¼');
                
                setTimeout(() => {
                    tiles[bestMove].style.boxShadow = '';
                }, 1500);
            }
        }

        // æ·»åŠ æ‘‡æ™ƒåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);

        // é”®ç›˜æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            if (!isPlaying) return;
            
            const emptyIndex = board.indexOf(0);
            const row = Math.floor(emptyIndex / gridSize);
            const col = emptyIndex % gridSize;
            
            let targetIndex = -1;
            
            switch(e.key) {
                case 'ArrowUp':
                    if (row < gridSize - 1) targetIndex = emptyIndex + gridSize;
                    break;
                case 'ArrowDown':
                    if (row > 0) targetIndex = emptyIndex - gridSize;
                    break;
                case 'ArrowLeft':
                    if (col < gridSize - 1) targetIndex = emptyIndex + 1;
                    break;
                case 'ArrowRight':
                    if (col > 0) targetIndex = emptyIndex - 1;
                    break;
            }
            
            if (targetIndex !== -1) {
                e.preventDefault();
                handleTileClick(targetIndex);
            }
        });

        // åˆå§‹åŒ–
        initGame();
    </script>
</body>
</html>